{{define "datagrid_table"}}
<table class="datagrid-table dg-initializing">
    <thead>
        <tr>
            {{range .UIColumns}}
            <th class="{{if .Class}}{{.Class}}{{else}}col-{{.Field}}{{end}}{{if not .Visible}} hidden-col{{end}}{{if .Sortable}} sortable{{end}}"
                title="{{.Label}}" data-field="{{.Field}}" data-label="{{.Label}}" data-sortable="{{.Sortable}}"
                data-sort="NONE" draggable="true">
                {{if .Icon}}
                <i class="{{if $.IsPhosphor}}ph {{if not (contains .Icon " ph-")}}ph-{{end}}{{else}}fas {{if not
                    (contains .Icon "fa-" )}}fa-{{end}}{{end}}{{.Icon}}"></i>
                {{else}}{{.Label}}
                {{end}}
                <div class="resizer"></div>
            </th>
            {{end}}
        </tr>
    </thead>
    <tbody>
        {{range .Records}}
        <tr data-id="{{.id}}" data-json="{{._json}}" {{if ._row_style}}data-row-style="{{._row_style}}" {{end}} {{if
            ._row_class}}class="{{._row_class}}" {{end}}>
            {{$row := .}}
            {{range $.UIColumns}}
            <td
                class="{{if .Class}}{{.Class}}{{else}}col-{{.Field}}{{end}}{{if .CSS}} {{.CSS}}{{end}}{{if not .Visible}} hidden-col{{end}}">
                {{if .Display}}
                {{renderRow .Display $row}}
                {{else if eq .Type "status"}}
                <span class="badge badge-{{index $row .Field}}">{{index $row .Field}}</span>
                {{else if eq .Type "json"}}
                <code class="text-truncate-cell">{{index $row .Field}}</code>
                {{else}}
                {{$val := index $row .Field}}
                {{$lovItem := ""}}
                {{if .LOV}}
                {{range .LOV}}{{if eq .Value $val}}{{$lovItem = .}}{{end}}{{end}}
                {{end}}

                {{if $lovItem}}
                {{if $lovItem.Display}}
                {{$disp := replace $lovItem.Display (printf "%%%s%%" .Field) (printf "%v" $val)}}
                {{if (contains $lovItem.Display "ph-")}}
                <i class="ph {{$disp}}"></i>
                {{else if (contains $lovItem.Display "fa-")}}
                <i class="fas {{$disp}}"></i>
                {{else}}
                <i class="{{if $.IsPhosphor}}ph ph-{{else}}fas fa-{{end}}{{$disp}}"></i>
                {{end}}
                {{else if $lovItem.Label}}
                {{$lovItem.Label}}
                {{else}}
                {{$val}}
                {{end}}
                {{else}}
                {{$val}}
                {{end}}
                {{end}}
            </td>
            {{end}}
        </tr>
        {{else}}
        <tr>
            <td colspan="{{len .UIColumns}}" class="text-center text-muted">{{T `no_records_found` }}</td>
        </tr>
        {{end}}
    </tbody>
</table>

<div id="pagination-metadata" class="hidden" data-total-count="{{.TotalCount}}" data-offset="{{.Offset}}"
    data-limit="{{.Limit}}">
</div>
{{end}}